{% if params.data === true %}
{%set statsData = params.dataSource %} {# this sets the stats data loop to the datasource set in the component#}

{% if params.percentCard %}{# percent card  #}
    <div class="stats">
        {% if params.heading %}
        <h3 class="stats-heading
            {% if params.subhead === true %} stats-subhead {% endif %} 
        "> {{params.heading}}</h3>
        {% endif %}
        <p class="stats-intro">{{params.intro}} </p>
        <ul class="stats-list">
            
            {% for data in statsData %}
                <li class="stats-card-percent 
                            {% if params.color === "blue" %} stats-blue {% endif %} 
                            {% if params.color === "gray" %} stats-gray {% endif %} 
                            ">
                    <div class="stats-icon-percent
                            {% if params.color === "blue" %} stats-blue {% endif %} 
                            {% if params.color === "gray" %} stats-gray {% endif %} 
                            ">
                        {% if data.change === "up" %}
                            <span class="nysds-font-lg stats-green"><i class="fas fa-arrow-up"></i></span>
                            <span class="nysds-font-xl nysds-font-bold">  {{data.percent}} </span>
                        {% else %}
                            <span class=" nysds-font-lg stats-red"><i class="fas fa-arrow-down"></i></span>
                            <span class="nysds-font-xl nysds-font-bold"> {{data.percent}} </span>
                        {% endif %}
                    </div>
                    {% if data.category %}
                    <h4 class="stats-the
                            {% if params.color === "blue" %} stats-the-blue {% endif %} 
                            {% if params.color === "gray" %} stats-the-gray {% endif %} 
                            ">
                        {{data.users}}
                    </h4>
                    {% endif %}
                    <p class="stats-description">
                        {{data.category}}
                    </p>
                    
                </li>
            {% endfor %}
        </ul>
        {% if params.outro %}
            <p class="stats-outro">{{params.outro | safe}}</p>
        {% endif %}
        {% if params.ctatext %}
            <a href="{{params.ctalink}}" class="stats-cta"> {{params.ctatext}} </a>
        {% endif %} 
    </div>


{% else %}{# regular data card #}
     <div class="stats">
        {% if params.heading %}
        <h3 class="stats-heading
            {% if params.subhead === true %} stats-subhead {% endif %} 
        "> {{params.heading}}</h3>
        {% endif %}
        <p class="stats-intro">{{params.intro}} </p>
        <ul class="stats-list">
            
            {% for data in statsData %}
                <li class="stats-card 
                            {% if params.color === "blue" %} stats-blue {% endif %} 
                            {% if params.color === "gray" %} stats-gray {% endif %} 
                            ">
                    <div class="stats-icon
                            {% if params.color === "blue" %} stats-blue {% endif %} 
                            {% if params.color === "gray" %} stats-gray {% endif %} 
                            ">
                        {% if data.change === "up" %}
                            <span class="nysds-font-lg stats-green"><i class="fas fa-arrow-up"></i></span>
                            <span class="nysds-font-xl nysds-font-bold">  {{data.percent}} </span>
                        {% else %}
                            <span class=" nysds-font-lg stats-red"><i class="fas fa-arrow-down"></i></span>
                            <span class="nysds-font-xl nysds-font-bold"> {{data.percent}} </span>
                        {% endif %}
                    </div>
                    {% if data.category %}
                    <h4 class="stats-the
                            {% if params.color === "blue" %} stats-the-blue {% endif %} 
                            {% if params.color === "gray" %} stats-the-gray {% endif %} 
                            ">
                        {{data.users}}
                    </h4>
                    {% endif %}
                    <p class="stats-description">
                        {{data.category}}
                    </p>
                    
                </li>
            {% endfor %}
        </ul>
        {% if params.outro %}
            <p class="stats-outro">{{params.outro | safe}}</p>
        {% endif %}
        {% if params.ctatext %}
            <a href="{{params.ctalink}}" class="stats-cta"> {{params.ctatext}} </a>
        {% endif %} 
    </div>
{% endif %}


{% else %} {# regular stats card #}
<div class="stats">
    {% if params.heading %}
    <h3 class="stats-heading
        {% if params.subhead === true %} stats-subhead {% endif %} 
    "> {{params.heading}}</h3>
    {% endif %}
    <p class="stats-intro">{{params.intro}}</p>
    <ul class="stats-list">
        {% for card in params.cards %}
            <li class="stats-card 
                        {% if card.color === "blue" %} stats-blue {% endif %} 
                        {% if card.color === "gray" %} stats-gray {% endif %} 
                        ">
                <div class="stats-icon
                        {% if card.color === "blue" %} stats-blue {% endif %} 
                        {% if card.color === "gray" %} stats-gray {% endif %} 
                        ">
                    {{card.icon | safe }}
                </div>
                {% if card.stat %}
                <h4 class="stats-the
                        {% if card.color === "blue" %} stats-the-blue {% endif %} 
                        {% if card.color === "gray" %} stats-the-gray {% endif %} 
                        ">
                    {{card.stat}}
                </h4>
                {% endif %}
                <p class="stats-description">
                    {{card.description}}
                </p>
                
            </li>
        {% endfor %}
    </ul>

    {% if params.outro %}
    <p class="stats-outro">{{params.outro | safe}}</p>
    {% endif %}

    {% if params.ctatext %}
    <a href="{{params.ctalink}}" class="stats-cta"> {{params.ctatext}} </a>
    {% endif %}

</div>
{% endif %}


